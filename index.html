<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Current Weather</title>
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,900" rel="stylesheet">
        <link href="style.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div id="weather">
        <div id="description"></div>
        <h1 id="temp"></h1>
        <div id="location"></div>
        <h1 id="wind-speed"></h1>
        <h1 id="wind-direction"></h1>
        
    </div>
    <script lang="text/javascript">
        const cityID = 2654710;

        function weatherBalloon( cityID ) {
            var key = '36b033476dd5cea0c38cb227411b005f';
            fetch('https://api.openweathermap.org/data/2.5/weather?id=' + cityID+ '&appid=' + key)  
            .then(function(resp) { return resp.json() }) // Convert data to json
            .then(function(data) {
                drawWeather(data);
            })
            .catch(function() {
                // catch any errors
            });
        }
        
        
        function drawWeather( d ) {
            var celcius = Math.round(parseFloat(d.main.temp)-273.15);
            var fahrenheit = Math.round(((parseFloat(d.main.temp)-273.15)*1.8)+32); 
            var description = d.weather[0].description;
            let windDirectionDeg = d.wind.deg;
            let windDirection;
            console.log(windDirectionDeg);
        
            function convertWindDirection (w) {
                if (w >= 348.75 && w <= 365) {
                    windDirection = 'N';
                } else if (w >= 0 && w < 11.25) {
                    windDirection = 'N';
                } else if (w >= 11.25 && w < 33.75) {
                    windDirection = 'NNE';
                } else if (w >= 33.75 && w < 56.25) {
                    windDirection = 'NE';
                } else if (w >= 56.25 && w < 78.75) {
                    windDirection = 'ENE';
                } else if (w >= 78.75 && w < 101.25) {
                    windDirection = ''; 
                } else if () {
                    windDirection = '';
                } else if () {
                    windDirection = '';
                } else if () {
                    windDirection = '';
                } else if () {
                    windDirection = '';
                } else if () {
                    windDirection = '';
                } else if () {
                    windDirection = '';
                } else if () {
                    windDirection = '';
                } else if () {
                    windDirection = '';
                }
            }
            convertWindDirection(windDirectionDeg);
            console.log(windDirection);
            
            document.getElementById('description').innerHTML = description;
            document.getElementById('temp').innerHTML = celcius + '&deg;';
            document.getElementById('location').innerHTML = d.name;
            document.getElementById('wind-speed').innerHTML = Math.round(d.wind.speed * 2.23694);
            document.getElementById('wind-direction').innerHTML = d.wind.deg;
            
            

            console.log(d.weather.main);
        
            
            if( description.indexOf('rain') > 0 ) {
                    document.body.className = 'rainy';
            } else if( description.indexOf('cloud') > 0 ) {
                document.body.className = 'cloudy';
            } else if( description.indexOf('sunny') > 0 ) {
                    document.body.className = 'sunny';
            }
        }

        window.onload = function() {
            weatherBalloon( cityID );
        }
    </script>

        <!-- HTML for inputs -->
        <!-- <button id="showDescription">Show Description</button>
        <div id="description">
            <p>I cycle to work every morning along Brighton's seafront. It gets windy... very windy. Each morning I check my weather app to see if 1. The wind is pointing towards me (from the west) and 2. if the wind speed is above 25mph. If both of those conditions are true, then I get the bus. Other wise, I cycle. This app aims to calculate this for me each morning.</p>
        </div>
        <br>
        <input type="text" id="mph">
        <button id="calculate">Calculate</button>
        <div id="answer"></div>
        
        <script>
        const showDescription = document.getElementById('showDescription');
        const description = document.getElementById('description');
        const mph = document.getElementById('mph');
        const calculate = document.getElementById('calculate');
        const answer = document.getElementById('answer');

        
        showDescription.addEventListener('click', function showDesc () {
            
            if (description.style.display === "none") {
                description.style.display = 'block';
                showDescription.innerHTML = "Hide Description";
            } else  {
                description.style.display = 'none';
                showDescription.innerHTML = "Show Description";
            }
        });

        

        calculate.addEventListener('click', function calc () {
            // check if mph.value is >= 25
            if (mph.value <= 25 && mph.value > 0) {
                answer.innerHTML = "<h1>Cycle</h1>";
            } else if (mph.value > 25) {
                answer.innerHTML = "<h1>Don't Cycle</h1>";
            } else  {
                alert('please submit a value');
            }
        });
        
        
        </script> -->
    </body>
</html>